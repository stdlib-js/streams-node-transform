// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("stream"),require("process")):"function"==typeof define&&define.amd?define(["stream","process"],r):(t="undefined"!=typeof globalThis?globalThis:t||self).transformStream=r(t.require$$1,t.require$$0$1)}(this,(function(t,r){"use strict";var e="function"==typeof Object.defineProperty?Object.defineProperty:null;var n,o=Object.defineProperty,i=Object.prototype,u=i.toString,f=i.__defineGetter__,c=i.__defineSetter__,a=i.__lookupGetter__,l=i.__lookupSetter__;n=function(){try{return e({},"x",{}),!0}catch(t){return!1}}()?o:function(t,r,e){var n,o,s,p;if("object"!=typeof t||null===t||"[object Array]"===u.call(t))throw new TypeError("invalid argument. First argument must be an object. Value: `"+t+"`.");if("object"!=typeof e||null===e||"[object Array]"===u.call(e))throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+e+"`.");if((o="value"in e)&&(a.call(t,r)||l.call(t,r)?(n=t.__proto__,t.__proto__=i,delete t[r],t[r]=e.value,t.__proto__=n):t[r]=e.value),s="get"in e,p="set"in e,o&&(s||p))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return s&&f&&f.call(t,r,e.get),p&&c&&c.call(t,r,e.set),t};var s=n;function p(t,r,e){s(t,r,{configurable:!1,enumerable:!1,writable:!1,value:e})}function y(t){if(t.__esModule)return t;var r=t.default;if("function"==typeof r){var e=function t(){if(this instanceof t){var e=[null];e.push.apply(e,arguments);var n=Function.bind.apply(r,e);return new n}return r.apply(this,arguments)};e.prototype=r.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach((function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})})),e}var h=y(Object.freeze({__proto__:null,default:()=>()=>{}}));function g(t){var r=typeof t;return null===t||"object"!==r&&"function"!==r?new TypeError("invalid argument. A provided constructor must be either an object (except null) or a function. Value: `"+t+"`."):null}var d=Object.create;function b(){}var v="function"==typeof d?d:function(t){return b.prototype=t,new b};function m(t,r){var e=g(t);if(e)throw e;if(e=g(r))throw e;if(void 0===r.prototype)throw new TypeError("invalid argument. Second argument must have a prototype from which another object can inherit. Value: `"+r.prototype+"`.");return t.prototype=v(r.prototype),s(t.prototype,"constructor",{configurable:!0,enumerable:!1,writable:!0,value:t}),t}var w=/./;function j(t){return"boolean"==typeof t}var O="function"==typeof Symbol&&"symbol"==typeof Symbol("foo");function _(){return O&&"symbol"==typeof Symbol.toStringTag}var S=Object.prototype.toString;var E=Object.prototype.hasOwnProperty;function T(t,r){return null!=t&&E.call(t,r)}var P="function"==typeof Symbol?Symbol.toStringTag:"";var M=_()?function(t){var r,e,n;if(null==t)return S.call(t);e=t[P],r=T(t,P);try{t[P]=void 0}catch(r){return S.call(t)}return n=S.call(t),r?t[P]=e:delete t[P],n}:function(t){return S.call(t)},k=Boolean.prototype.toString;var B=_();function I(t){return"object"==typeof t&&(t instanceof Boolean||(B?function(t){try{return k.call(t),!0}catch(t){return!1}}(t):"[object Boolean]"===M(t)))}function A(t){return j(t)||I(t)}function N(){return new Function("return this;")()}p(A,"isPrimitive",j),p(A,"isObject",I);var x="object"==typeof self?self:null,V="object"==typeof window?window:null,C="object"==typeof global?global:null;var H=function(t){if(arguments.length){if(!j(t))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+t+"`.");if(t)return N()}if(x)return x;if(V)return V;if(C)return C;throw new Error("unexpected error. Unable to resolve global object.")}(),F=H.document&&H.document.childNodes,W=Int8Array;function L(){return/^\s*function\s*([^(]*)/i}var $=/^\s*function\s*([^(]*)/i;p(L,"REGEXP",$);var q=Array.isArray?Array.isArray:function(t){return"[object Array]"===M(t)};function G(t){return null!==t&&"object"==typeof t}function Y(t){var r,e,n,o;if(("Object"===(e=M(t).slice(8,-1))||"Error"===e)&&t.constructor){if("string"==typeof(n=t.constructor).name)return n.name;if(r=$.exec(n.toString()))return r[1]}return G(o=t)&&(o._isBuffer||o.constructor&&"function"==typeof o.constructor.isBuffer&&o.constructor.isBuffer(o))?"Buffer":e}p(G,"isObjectLikeArray",function(t){if("function"!=typeof t)throw new TypeError("invalid argument. Must provide a function. Value: `"+t+"`.");return function(r){var e,n;if(!q(r))return!1;if(0===(e=r.length))return!1;for(n=0;n<e;n++)if(!1===t(r[n]))return!1;return!0}}(G));var D="function"==typeof w||"object"==typeof W||"function"==typeof F?function(t){return Y(t).toLowerCase()}:function(t){var r;return null===t?"null":"object"===(r=typeof t)?Y(t).toLowerCase():r};function J(t){return"function"===D(t)}var R=J(Object.assign),X=Object.assign,U=Object;function z(t){return Object.keys(Object(t))}var K,Q=void 0!==Object.keys;function Z(t){return"[object Arguments]"===M(t)}K=function(){return Z(arguments)}();var tt=K;function rt(t){return"string"==typeof t}var et=String.prototype.valueOf;var nt=_();function ot(t){return"object"==typeof t&&(t instanceof String||(nt?function(t){try{return et.call(t),!0}catch(t){return!1}}(t):"[object String]"===M(t)))}function it(t){return rt(t)||ot(t)}function ut(t){return"number"==typeof t}p(it,"isPrimitive",rt),p(it,"isObject",ot);var ft=Number,ct=ft.prototype.toString;var at=_();function lt(t){return"object"==typeof t&&(t instanceof ft||(at?function(t){try{return ct.call(t),!0}catch(t){return!1}}(t):"[object Number]"===M(t)))}function st(t){return ut(t)||lt(t)}function pt(t){return t!=t}function yt(t){return ut(t)&&pt(t)}function ht(t){return lt(t)&&pt(t.valueOf())}function gt(t){return yt(t)||ht(t)}p(st,"isPrimitive",ut),p(st,"isObject",lt),p(gt,"isPrimitive",yt),p(gt,"isObject",ht);var dt=Number.POSITIVE_INFINITY,bt=ft.NEGATIVE_INFINITY,vt=Math.floor;function mt(t){return vt(t)===t}function wt(t){return t<dt&&t>bt&&mt(t)}function jt(t){return ut(t)&&wt(t)}function Ot(t){return lt(t)&&wt(t.valueOf())}function _t(t){return jt(t)||Ot(t)}p(_t,"isPrimitive",jt),p(_t,"isObject",Ot);var St=Object.prototype.propertyIsEnumerable;var Et=!St.call("beep","0");function Tt(t,r){var e;return null!=t&&(!(e=St.call(t,r))&&Et&&it(t)?!yt(r=+r)&&jt(r)&&r>=0&&r<t.length:e)}var Pt=tt?Z:function(t){return null!==t&&"object"==typeof t&&!q(t)&&"number"==typeof t.length&&mt(t.length)&&t.length>=0&&t.length<=4294967295&&T(t,"callee")&&!Tt(t,"callee")},Mt=Array.prototype.slice;var kt=Tt((function(){}),"prototype"),Bt=!Tt({toString:null},"toString");function It(t){return"object"==typeof t&&null!==t&&"number"==typeof t.length&&mt(t.length)&&t.length>=0&&t.length<=9007199254740991}function At(t,r,e){var n,o;if(!It(t)&&!rt(t))throw new TypeError("invalid argument. First argument must be an array-like object. Value: `"+t+"`.");if(0===(n=t.length))return-1;if(3===arguments.length){if(!jt(e))throw new TypeError("invalid argument. `fromIndex` must be an integer. Value: `"+e+"`.");if(e>=0){if(e>=n)return-1;o=e}else(o=n+e)<0&&(o=0)}else o=0;if(gt(r)){for(;o<n;o++)if(gt(t[o]))return o}else for(;o<n;o++)if(t[o]===r)return o;return-1}function Nt(t){return t.constructor&&t.constructor.prototype===t}var xt=["console","external","frame","frameElement","frames","innerHeight","innerWidth","outerHeight","outerWidth","pageXOffset","pageYOffset","parent","scrollLeft","scrollTop","scrollX","scrollY","self","webkitIndexedDB","webkitStorageInfo","window"],Vt="undefined"==typeof window?void 0:window;var Ct=function(){var t;if("undefined"===D(Vt))return!1;for(t in Vt)try{-1===At(xt,t)&&T(Vt,t)&&null!==Vt[t]&&"object"===D(Vt[t])&&Nt(Vt[t])}catch(t){return!0}return!1}(),Ht="undefined"!=typeof window;var Ft,Wt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];Ft=Q?function(){return 2!==(z(arguments)||"").length}(1,2)?function(t){return Pt(t)?z(Mt.call(t)):z(t)}:z:function(t){var r,e,n,o,i,u,f;if(o=[],Pt(t)){for(f=0;f<t.length;f++)o.push(f.toString());return o}if("string"==typeof t){if(t.length>0&&!T(t,"0"))for(f=0;f<t.length;f++)o.push(f.toString())}else{if(!1==(n="function"==typeof t)&&!G(t))return o;e=kt&&n}for(i in t)e&&"prototype"===i||!T(t,i)||o.push(String(i));if(Bt)for(r=function(t){if(!1===Ht&&!Ct)return Nt(t);try{return Nt(t)}catch(t){return!1}}(t),f=0;f<Wt.length;f++)u=Wt[f],r&&"constructor"===u||!T(t,u)||o.push(String(u));return o};var Lt,$t=Ft,qt=U.getOwnPropertyDescriptor;Lt=R?X:function(t){var r,e,n,o,i,u,f,c;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(u=U(t),f=1;f<arguments.length;f++)if(null!=(r=arguments[f]))for(i=(n=$t(U(r))).length,c=0;c<i;c++)o=n[c],void 0!==(e=qt(r,o))&&e.enumerable&&(u[o]=r[o]);return u};var Gt=Lt,Yt={objectMode:!1,encoding:null,allowHalfOpen:!1,decodeStrings:!0};var Dt,Jt=Object.getPrototypeOf;Dt=J(Object.getPrototypeOf)?Jt:function(t){var r=function(t){return t.__proto__}(t);return r||null===r?r:"[object Function]"===M(t.constructor)?t.constructor.prototype:t instanceof Object?Object.prototype:null};var Rt=Dt;var Xt=Object.prototype;function Ut(t){var r;return!!function(t){return"object"==typeof t&&null!==t&&!q(t)}(t)&&(r=function(t){return null==t?null:(t=Object(t),Rt(t))}(t),!r||!T(t,"constructor")&&T(r,"constructor")&&J(r.constructor)&&"[object Function]"===M(r.constructor)&&T(r,"isPrototypeOf")&&J(r.isPrototypeOf)&&(r===Xt||function(t){var r;for(r in t)if(!T(t,r))return!1;return!0}(t)))}function zt(t){return ut(t)&&t>=0}function Kt(t){return lt(t)&&t.valueOf()>=0}function Qt(t){return zt(t)||Kt(t)}function Zt(){var t,r=arguments,e=r[0],n="https://stdlib.io/e/"+e+"?";for(t=1;t<r.length;t++)n+="&arg[]="+encodeURIComponent(r[t]);return n}function tr(t,r){return Ut(r)?T(r,"transform")&&(t.transform=r.transform,!J(t.transform))?new TypeError(Zt("0gB78","transform",t.transform)):T(r,"flush")&&(t.flush=r.flush,!J(t.flush))?new TypeError(Zt("0gB78","flush",t.flush)):T(r,"objectMode")&&(t.objectMode=r.objectMode,!j(t.objectMode))?new TypeError(Zt("0gB30","objectMode",t.objectMode)):T(r,"encoding")&&(t.encoding=r.encoding,!rt(t.encoding))?new TypeError(Zt("0gB2i","encoding",t.encoding)):T(r,"allowHalfOpen")&&(t.allowHalfOpen=r.allowHalfOpen,!j(t.allowHalfOpen))?new TypeError(Zt("0gB30","allowHalfOpen",t.allowHalfOpen)):T(r,"highWaterMark")&&(t.highWaterMark=r.highWaterMark,!zt(t.highWaterMark))?new TypeError(Zt("0gB4x","highWaterMark",t.highWaterMark)):T(r,"decodeStrings")&&(t.decodeStrings=r.decodeStrings,!j(t.decodeStrings))?new TypeError(Zt("0gB30","decodeStrings",t.decodeStrings)):null:new TypeError(Zt("0gB2h",r))}p(Qt,"isPrimitive",zt),p(Qt,"isObject",Kt);var rr=r;var er=h("transform-stream:destroy");function nr(t){var r;return this._destroyed?(er("Attempted to destroy an already destroyed stream."),this):(r=this,this._destroyed=!0,function(t){var r,e;for(r=[],e=1;e<arguments.length;e++)r.push(arguments[e]);function n(){t.apply(null,r)}rr.nextTick(n)}((function(){t&&(er("Stream was destroyed due to an error. Error: %s.",JSON.stringify(t)),r.emit("error",t));er("Closing the stream..."),r.emit("close")})),this)}var or=h("transform-stream:transform");function ir(t,r,e){or("Received a new chunk. Chunk: %s. Encoding: %s.",t.toString(),r),e(null,t)}var ur=h,fr=t.Transform,cr=ur("transform-stream:main");function ar(t){var r,e;if(!(this instanceof ar))return arguments.length?new ar(t):new ar;if(r=Gt({},Yt),arguments.length&&(e=tr(r,t)))throw e;return cr("Creating a transform stream configured with the following options: %s.",JSON.stringify(r)),fr.call(this,r),this._destroyed=!1,r.transform?this._transform=r.transform:this._transform=ir,r.flush&&(this._flush=r.flush),this}m(ar,fr),ar.prototype.destroy=nr;var lr=h,sr=t.Transform,pr=lr("transform-stream:ctor");return p(ar,"objectMode",(function(t){var r;if(arguments.length){if(!Ut(t))throw new TypeError(Zt("0gB2h",t));r=Gt({},t)}else r={};return r.objectMode=!0,new ar(r)})),p(ar,"factory",(function(t){var r;if(arguments.length){if(!Ut(t))throw new TypeError(Zt("0gB2h",t));r=Gt({},t)}else r={};return e;function e(t,e){return r.transform=t,arguments.length>1?r.flush=e:delete r.flush,new ar(r)}})),p(ar,"ctor",(function(t){var r,e,n;if(e=Gt({},Yt),arguments.length&&(n=tr(e,t)))throw n;function o(t){var r,n;if(!(this instanceof o))return arguments.length?new o(t):new o;if(r=Gt({},e),arguments.length&&(n=tr(r,t)))throw n;return pr("Creating a transform stream configured with the following options: %s.",JSON.stringify(r)),sr.call(this,r),this._destroyed=!1,this}return r=e.transform?e.transform:ir,m(o,sr),o.prototype._transform=r,e.flush&&(o.prototype._flush=e.flush),o.prototype.destroy=nr,o})),ar}));
//# sourceMappingURL=index.js.map
