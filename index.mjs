// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-inherit@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-copy@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-number@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-next-tick@esm/index.mjs";function d(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}var m="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function p(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}var h=p,g=c;function b(e){if(h===setTimeout)return setTimeout(e,0);if((h===p||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}"function"==typeof m.setTimeout&&(h=setTimeout),"function"==typeof m.clearTimeout&&(g=clearTimeout);var v,w=[],j=!1,y=-1;function x(){j&&v&&(j=!1,v.length?w=v.concat(w):y=-1,w.length&&T())}function T(){if(!j){var e=b(x);j=!0;for(var t=w.length;t;){for(v=w,w=[];++y<t;)v&&v[y].run();y=-1,t=w.length}v=null,j=!1,function(e){if(g===clearTimeout)return clearTimeout(e);if((g===c||!g)&&clearTimeout)return g=clearTimeout,clearTimeout(e);try{g(e)}catch(t){try{return g.call(null,e)}catch(t){return g.call(this,e)}}}(e)}}function _(e,t){this.fun=e,this.array=t}_.prototype.run=function(){this.fun.apply(null,this.array)};function O(){}var E=O,M=O,S=O,k=O,P=O,W=O,q=O;var D=m.performance||{},H=D.now||D.mozNow||D.msNow||D.oNow||D.webkitNow||function(){return(new Date).getTime()};var N=new Date;var R={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];w.push(new _(e,t)),1!==w.length||j||b(T)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:E,addListener:M,once:S,off:k,removeListener:P,removeAllListeners:W,emit:q,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*H.call(D),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-N)/1e3}};module.exports=void 0!==R&&"renderer"===R.type?require("./browser.js"):require("./node.js");var A=d(Object.freeze({__proto__:null})),C=require("stream");"disable"===R.env.READABLE_STREAM&&C?(module.exports=C,exports=module.exports=C.Readable,exports.Readable=C.Readable,exports.Writable=C.Writable,exports.Duplex=C.Duplex,exports.Transform=C.Transform,exports.PassThrough=C.PassThrough,exports.Stream=C):(exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=C||exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js"));var L=d(Object.freeze({__proto__:null})),z={objectMode:!1,encoding:null,allowHalfOpen:!1,decodeStrings:!0},J=n,V=o,B=s,F=i.isPrimitive,G=a.isPrimitive,I=l.isPrimitive,K=u;var Q=function(e,t){return J(t)?V(t,"transform")&&(e.transform=t.transform,!B(e.transform))?new TypeError(K("invalid option. `%s` option must be a function. Option: `%s`.","transform",e.transform)):V(t,"flush")&&(e.flush=t.flush,!B(e.flush))?new TypeError(K("invalid option. `%s` option must be a function. Option: `%s`.","flush",e.flush)):V(t,"objectMode")&&(e.objectMode=t.objectMode,!F(e.objectMode))?new TypeError(K("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):V(t,"encoding")&&(e.encoding=t.encoding,!I(e.encoding))?new TypeError(K("invalid option. `%s` option must be a string. Option: `%s`.","encoding",e.encoding)):V(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!F(e.allowHalfOpen))?new TypeError(K("invalid option. `%s` option must be a boolean. Option: `%s`.","allowHalfOpen",e.allowHalfOpen)):V(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!G(e.highWaterMark))?new TypeError(K("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):V(t,"decodeStrings")&&(e.decodeStrings=t.decodeStrings,!F(e.decodeStrings))?new TypeError(K("invalid option. `%s` option must be a boolean. Option: `%s`.","decodeStrings",e.decodeStrings)):null:new TypeError(K("invalid argument. Options argument must be an object. Value: `%s`.",t))},U=f,X=A("transform-stream:destroy");var Y=function(e){var t;return this._destroyed?(X("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,U((function(){e&&(X("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));X("Closing the stream..."),t.emit("close")})),this)},Z=A("transform-stream:transform");var $=function(e,t,r){Z("Received a new chunk. Chunk: %s. Encoding: %s.",e.toString(),t),r(null,e)},ee=A,te=L.Transform,re=t,ne=r,oe=z,se=Q,ie=Y,ae=$,le=ee("transform-stream:main");function ue(e){var t,r;if(!(this instanceof ue))return arguments.length?new ue(e):new ue;if(t=ne(oe),arguments.length&&(r=se(t,e)))throw r;return le("Creating a transform stream configured with the following options: %s.",JSON.stringify(t)),te.call(this,t),this._destroyed=!1,t.transform?this._transform=t.transform:this._transform=ae,t.flush&&(this._flush=t.flush),this}re(ue,te),ue.prototype.destroy=ie;var fe=ue,de=n,me=u,pe=r,ce=fe;var he=function(e){var t;if(arguments.length){if(!de(e))throw new TypeError(me("invalid argument. Options argument must be an object. Value: `%s`.",e));t=pe(e)}else t={};return t.objectMode=!0,new ce(t)},ge=n,be=u,ve=r,we=fe;var je=function(e){var t;if(arguments.length){if(!ge(e))throw new TypeError(be("invalid argument. Options argument must be an object. Value: `%s`.",e));t=ve(e)}else t={};return r;function r(e,r){return t.transform=e,arguments.length>1?t.flush=r:delete t.flush,new we(t)}},ye=A,xe=L.Transform,Te=t,_e=r,Oe=z,Ee=Q,Me=Y,Se=$,ke=ye("transform-stream:ctor");var Pe=function(e){var t,r,n;if(r=_e(Oe),arguments.length&&(n=Ee(r,e)))throw n;function o(e){var t,n;if(!(this instanceof o))return arguments.length?new o(e):new o;if(t=_e(r),arguments.length&&(n=Ee(t,e)))throw n;return ke("Creating a transform stream configured with the following options: %s.",JSON.stringify(t)),xe.call(this,t),this._destroyed=!1,this}return t=r.transform?r.transform:Se,Te(o,xe),o.prototype._transform=t,r.flush&&(o.prototype._flush=r.flush),o.prototype.destroy=Me,o},We=e,qe=fe,De=he,He=je,Ne=Pe;We(qe,"objectMode",De),We(qe,"factory",He),We(qe,"ctor",Ne);var Re=qe;export{Ne as ctor,Re as default,He as factory,De as objectMode};
//# sourceMappingURL=index.mjs.map
